{% extends "fibeWWWConfBundle::base.html.twig" %}


{% block body %}
 

<div class="page-header">
  <h1>{% trans %}Edit{% endtrans %}</h1>
</div>

<ul class="record_actions">
    <li>
        <button type="submit" class="btn btn-primary">{% trans %}Update event{% endtrans %}</button> 
    </li>
    <li>
        <form action="{{ path('admin_schedule_event_delete', { 'id': entity.id }) }}" method="post">
            {{ form_widget(delete_form) }}
            <button type="submit" class="btn btn-danger">{% trans %}Delete{% endtrans %}</button>
        </form>
    </li>
</ul>

    <form id="event"  > 
        <p>  
            <div class="control-group">
            {{ form_row(formEvent.summary) }}
            {{ form_row(formEvent.description) }} 
            {{ form_row(formEvent.categories) }}
            {{ form_row(formEvent.status) }}
            {{ form_row(formEvent.url) }}
            {{ form_row(formEvent.organizer) }}
            {{ form_row(formEvent.contacts) }}
            {{ form_row(formEvent.location) }}
            {{ form_row(formEvent.resources) }}
            
            </div> 
            <div style="visibility:hidden;height:0px;" id="hiddenInputs">     {{ form_rest(formEvent )}}</div> 
        </p>
    <button type="submit" class="btn btn-primary">{% trans %}Update event{% endtrans %}</button>
    <a class="btn" href="{{ path('admin_schedule_event') }}">
            {% trans %}View all events{% endtrans %}
        </a>
    </form>

{% include "IDCISimpleScheduleBundle:Event:xproperties.html.twig" with {"with_form": true} %}
{% include "IDCISimpleScheduleBundle:Event:relation.html.twig" with {"with_form": true} %}

{% endblock body %}


{%  block javascripts %} 
<script src="{{ asset('bundles/fibewwwconf/js/bootstrap-datetimepicker.min.js') }}" type="text/javascript" ></script>  
<script type="text/javascript" src="http://rdfquery.googlecode.com/files/jquery.rdfquery.core.min-1.0.js"></script>
<script type="text/javascript" src="http://www.jibbering.com/rdf-parser/parser.js"></script>
<script src="{{ asset('bundles/fibewwwconf/js/autocompletion.js') }}" type="text/javascript" ></script>
<script src="{{ asset('bundles/fibewwwconf/js/SWDF.js') }}" type="text/javascript" ></script>

<script type="text/javascript" >
 
 

function FormPost(uri,form){
    $.ajax({
        type: "POST",
        url:uri,
        async: false,
        data: form.serialize(),
        success:function(a,b,c) {
                     console.log(a,b,c);
        }
    });
} 


// Read a page's GET URL variables and return them as an associative array.
function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}

$(document).ready(function(){ 
    
    $('#event').submit(function(event) {
        //edit event
        event.preventDefault();
        FormPost("{{ path('wwwconf_updateEvent', { 'id': entity.id }) }}",$(this));
         
        return false;
    }); 
});




</script> 
    
{% endblock javascripts %}

